var Promise = require('bluebird');
var db = require('./server/db');

const { User, Property, Image } = require('./server/db/models')


var data = {
  users: [
      {email: "admin", password: "1oh1admin"},
    ],
  properties: [ { name: '841 Madison Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10021',
        acquired: '2010',
        feet: 18000,
        thumb: '101holdings-841madison-thumb.jpg',
        rank: 1 },
      { name: '66 Leonard Street',
        city: 'New York',
        state: 'New York',
        zip: '10013',
        acquired: '2012',
        feet: 25746,
        thumb: '101holdings-66leonard-thumb.jpg',
        rank: 2 },
      { name: 'The Chrystie',
        city: 'New York',
        state: 'New York',
        zip: '10002',
        acquired: '2014',
        feet: 339330,
        thumb: '101holdings-229chrystie-thumb.jpg',
        rank: 3 },
      { name: '415 Greenwich Street',
        city: 'New York',
        state: 'New York',
        zip: '10013',
        acquired: '2014',
        feet: 4971,
        thumb: '101holdings-415greenwich-thumb.jpg',
        rank: 4 },
      { name: '200 Central Park South',
        city: 'New York',
        state: 'New York',
        zip: '10019',
        acquired: '2014',
        feet: 31249,
        thumb: '101holdings-200cps-thumb.jpg',
        rank: 5 },
      { name: '1424 Lexington Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10128',
        acquired: '2014',
        feet: 13256,
        thumb: '101holdings-1424lexington-thumb.jpg',
        rank: 6 },
      { name: '1991 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10023',
        acquired: '2013',
        feet: 7150,
        thumb: '101holdings-1991broadway-thumb.jpg',
        rank: 7 },
      { name: '285 Lafayette Street',
        city: 'New York',
        state: 'New York',
        zip: '10012',
        acquired: '2014',
        feet: 6900,
        thumb: '101holdings-285lafayette-thumb.jpg',
        rank: 8 },
      { name: '145 Greene Street',
        city: 'New York',
        state: 'New York',
        zip: '10012',
        acquired: '2013',
        feet: 2747,
        thumb: '101holdings-145greene-thumb.jpg',
        rank: 9 },
      { name: '1311 Lexington Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10128',
        acquired: '2014',
        feet: 9045,
        thumb: '101holdings-1311lexington-thumb.jpg',
        rank: 10 },
      { name: '21 East 62nd Street',
        city: 'New York',
        state: 'New York',
        zip: '10065',
        acquired: '2013',
        feet: 5782,
        thumb: '101holdings-2162nd-thumb.jpg',
        rank: 11 },
      { name: '555 West 59th Street',
        city: 'New York',
        state: 'New York',
        zip: '10019',
        acquired: '2014',
        feet: 40568,
        thumb: '101holdings-55559th-thumb.jpg',
        rank: 12 },
      { name: '4168 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10033',
        acquired: '2012',
        feet: 99201,
        thumb: '101holdings-4168broadway-thumb.jpg',
        rank: 13 },
      { name: '2067 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10023',
        acquired: '2014',
        feet: 14007,
        thumb: '101holdings-2067broadway-thumb.jpg',
        rank: 14 },
      { name: '300 West 145th Street',
        city: 'New York',
        state: 'New York',
        zip: '10039',
        acquired: '2012',
        feet: 84644,
        thumb: '101holdings-300145th-thumb.jpg',
        rank: 15 },
      { name: '1400 Fifth Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10026',
        acquired: '2014',
        feet: 30807,
        thumb: '101holdings-14005th-thumb.jpg',
        rank: 16 },
      { name: '115 Seventh Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10011',
        acquired: '2014',
        feet: 41500,
        thumb: '101holdings-1157th-thumb.jpg',
        rank: 17 },
      { name: '1110 Third Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10065',
        acquired: '2015',
        feet: 25175,
        thumb: '101holdings-11103rd-thumb.jpg',
        rank: 18 },
      { name: '730 Lexington Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10022',
        acquired: '2015',
        feet: 5879,
        thumb: '101holdings-730lexington-thumb.jpg',
        rank: 19 },
      { name: '1022 Lexington Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10021',
        acquired: '2016',
        feet: 4307,
        thumb: '101holdings-1022lexington-thumb.jpg',
        rank: 20 },
      { name: '3860 East Tremont Avenue',
        city: 'Bronx',
        state: 'New York',
        zip: '10465',
        acquired: '2015',
        feet: 14892,
        thumb: '101holdings-3860tremont-thumb.jpg',
        rank: 21 },
      { name: '235 East 14th Street',
        city: 'New York',
        state: 'New York',
        zip: '10003',
        acquired: '2013',
        feet: 22254,
        thumb: '101holdings-23514th-thumb.jpg',
        rank: 22 },
      { name: '3560 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10031',
        acquired: '2012',
        feet: 21600,
        thumb: '101holdings-3560broadway-thumb.jpg',
        rank: 23 },
      { name: '4162 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10033',
        acquired: '2016',
        feet: 34248,
        thumb: '101holdings-4162broadway-thumb.jpg',
        rank: 24 },
      { name: '601 Eighth Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10018',
        acquired: '2014',
        feet: 28750,
        thumb: '101holdings-6018th-thumb.jpg',
        rank: 25 },
      { name: '609 Eighth Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10018',
        acquired: '2014',
        feet: 3752,
        thumb: '101holdings-6098th-thumb.jpg',
        rank: 26 },
      { name: '156 Delancey Street',
        city: 'New York',
        state: 'New York',
        zip: '10002',
        acquired: '2013',
        feet: 2752,
        thumb: '101holdings-156delancey-thumb.jpg',
        rank: 27 },
      { name: '4138 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10033',
        acquired: '2013',
        feet: 5458,
        thumb: '101holdings-4138broadway-thumb.jpg',
        rank: 28 },
      { name: '144 Dyckman Street',
        city: 'New York',
        state: 'New York',
        zip: '10040',
        acquired: '2013',
        feet: 13000,
        thumb: '101holdings-144dyckman-thumb.jpg',
        rank: 29 },
      { name: '142 Duane Street',
        city: 'New York',
        state: 'New York',
        zip: '10013',
        acquired: '2014',
        feet: 7668,
        thumb: '101holdings-142duane-thumb.jpg',
        rank: 30 },
      { name: '4250 Broadway',
        city: 'New York',
        state: 'New York',
        zip: '10033',
        acquired: '0000',
        feet: 40100,
        thumb: '101holdings-4250broadway-thumb.jpg',
        rank: 31 },
      { name: '249 Church Street',
        city: 'New York',
        state: 'New York',
        zip: '10013',
        acquired: '2015',
        feet: 4580,
        thumb: '101holdings-249church-thumb.jpg',
        rank: 32 },
      { name: '1 Bagopa Plaza',
        city: 'Mount Vernon',
        state: 'New York',
        zip: '10550',
        acquired: '2017',
        feet: 63515,
        thumb: '101holdings-1bagopa-thumb.jpg',
        rank: 33 },
      { name: '257 Church Street',
        city: 'New York',
        state: 'New York',
        zip: '10013',
        acquired: '2012',
        feet: 5138,
        thumb: '101holdings-257church-thumb.jpg',
        rank: 34 },
      { name: '170-178 Ninth Avenue',
        city: 'New York',
        state: 'New York',
        zip: '10011',
        acquired: '2017',
        feet: 4250,
        thumb: '101holdings-170-1789th-thumb.jpg',
        rank: 35 },
      { name: '2040 White Plains Road',
        city: 'Bronx',
        state: 'New York',
        zip: '10462',
        acquired: '0000',
        feet: 0,
        thumb: '101holdings-2040whiteplains-thumb.jpg',
        rank: 36 },
      { name: '5517 Broadway',
        city: 'Bronx',
        state: 'New York',
        zip: '10463',
        acquired: '0000',
        feet: 0,
        thumb: '101holdings-5517broadway-thumb.jpg',
        rank: 37 },
      { name: '500 Waverly',
        city: 'Brooklyn',
        state: 'New York',
        zip: '11238',
        acquired: '0000',
        feet: 0,
        thumb: '101holdings-500waverly-thumb.jpg',
        rank: 38 },
      { name: '216 Lafayette Street',
        city: 'New York',
        state: 'New York',
        zip: '10012',
        acquired: '0000',
        feet: 0,
        thumb: '101holdings-216lafayette-thumb.jpg',
        rank: 39 },
      { name: '1851 Bruckner Boulevard',
        city: 'Bronx',
        state: 'New York',
        zip: '10472',
        acquired: '0000',
        feet: 41000,
        thumb: '101holdings-1851bruckner-thumb.jpg',
        rank: 40 }
      ],
      images: [ { filename: '101holdings-841madison-full.jpg', propertyId: 1 },
      { filename: '101holdings-66leonard-full.jpg', propertyId: 2 },
      { filename: '101holdings-229chrystie-full.jpg', propertyId: 3 },
      { filename: '101holdings-415greenwich-full.jpg', propertyId: 4 },
      { filename: '101holdings-200cps-full.jpg', propertyId: 5 },
      { filename: '101holdings-1424lexington-full.jpg',
        propertyId: 6 },
      { filename: '101holdings-1991broadway-full.jpg', propertyId: 7 },
      { filename: '101holdings-285lafayette-full.jpg', propertyId: 8 },
      { filename: '101holdings-145greene-full.jpg', propertyId: 9 },
      { filename: '101holdings-1311lexington-full.jpg',
        propertyId: 10 },
      { filename: '101holdings-2162nd-full.jpg', propertyId: 11 },
      { filename: '101holdings-55559th-full.jpg', propertyId: 12 },
      { filename: '101holdings-4168broadway-full.jpg',
        propertyId: 13 },
      { filename: '101holdings-2067broadway-full.jpg',
        propertyId: 14 },
      { filename: '101holdings-300145th-full.jpg', propertyId: 15 },
      { filename: '101holdings-14005th-full.jpg', propertyId: 16 },
      { filename: '101holdings-1157th-full.jpg', propertyId: 17 },
      { filename: '101holdings-11103rd-full.jpg', propertyId: 18 },
      { filename: '101holdings-730lexington-full.jpg',
        propertyId: 19 },
      { filename: '101holdings-1022lexington-full.jpg',
        propertyId: 20 },
      { filename: '101holdings-3860tremont-full.jpg', propertyId: 21 },
      { filename: '101holdings-23514th-full.jpg', propertyId: 22 },
      { filename: '101holdings-3560broadway-full.jpg',
        propertyId: 23 },
      { filename: '101holdings-4162broadway-full.jpg',
        propertyId: 24 },
      { filename: '101holdings-6018th-full.jpg', propertyId: 25 },
      { filename: '101holdings-6098th-full.jpg', propertyId: 26 },
      { filename: '101holdings-156delancey-full.jpg', propertyId: 27 },
      { filename: '101holdings-4138broadway-full.jpg',
        propertyId: 28 },
      { filename: '101holdings-144dyckman-full.jpg', propertyId: 29 },
      { filename: '101holdings-142duane-full.jpg', propertyId: 30 },
      { filename: '101holdings-4250broadway-full.jpg',
        propertyId: 31 },
      { filename: '101holdings-249church-full.jpg', propertyId: 32 },
      { filename: '101holdings-1bagopa-full.jpg', propertyId: 33 },
      { filename: '101holdings-257church-full.jpg', propertyId: 34 },
      { filename: '101holdings-170-1789th-full.jpg', propertyId: 35 },
      { filename: '101holdings-2040whiteplains-full.jpg',
        propertyId: 36 },
      { filename: '101holdings-5517broadway-full.jpg',
        propertyId: 37 },
      { filename: '101holdings-500waverly-full.jpg', propertyId: 38 },
      { filename: '101holdings-216lafayette-full.jpg',
        propertyId: 39 },
      { filename: '101holdings-1851bruckner-full.jpg',
        propertyId: 40 } ]
};

db.sync({force:true})
.then(function() {
  console.log("Dropped old data, now inserting data");
  const creatingUsers = Promise.map(data.users, function (user) {
    return User.create(user);
  });
  return Promise.all(creatingUsers)
})
.then(function () {
  const creatingProperties = Promise.map(data.properties, function (property) {
    return Property.create(property);
  })
    return Promise.all(creatingProperties);
})
.then(function () {
  const creatingImages = Promise.map(data.images, function (image) {
    return Image.create(image);
  })
    return Promise.all(creatingImages);
})
.then(function () {
  console.log('Finished inserting data');
})
.catch(function (err) {
  console.error('There was totally a problem', err, err.stack);
})
.finally(function () {
  db.close(); // creates but does not return a promise
  return null; // stops bluebird from complaining about un-returned promise
});
